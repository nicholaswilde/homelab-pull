---
- name: Configure ansible-pull
  hosts: all
  become: true
  tasks:
    - name: Start message
      ansible.builtin.command:
        cmd: wall '📌 Notice 🤖 Homelab Pull has begun configuring this instance 🦾'

- name: Configure ansible-pull
  hosts: all
  become: true
  roles:
    - ansible-pull
  tags:
    - ansible-pull

- name: Run linux_instance_generic role
  hosts: lxcs
  become: true
  roles:
    - linux_instance_generic
  tags:
    - linux_instance_generic

- name: Run update_apt role
  hosts: apt
  become: true
  roles:
    - update_apt
  tags:
    - update_apt

- name: Run update_docker role
  hosts: docker
  become: true
  roles:
    - update_docker
  tags:
    - update_docker

- name: Run cleanup role
  hosts: all
  become: true
  roles:
    - clean
  tags:
    - clean

- name: End ansible-pull
  hosts: all
  become: true
  tasks:
    - name: End message
      ansible.builtin.command:
        cmd: wall '📌 Notice 🤖 Homelab Pull has finished configuring this instance 🏁'
