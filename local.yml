---
- hosts: localhost
  connection: local
  become: true

  pre_tasks:
    - name: update repositories
      apt:
        update_cache: true
      changed_when: false

  tasks:
    - name: add hosts to inventory groups
      add_host:
        name: "{{ inventory_hostname }}"
        groups: "{{ hostvars[inventory_hostname].pull_groups }}"
      changed_when: False
    - name: Debug
      ansible.builtin.debug:
        msg: "{{ group_names }}"
    - name: include packages
      ansible.builtin.include_tasks: tasks/packages.yml
